function helper(){var l=this;l.goto=function(e){$("#preeload").show(),location.href=e},l.getestado=function(e,l){$.get("Home/getsstado",{Pais:e},function(e){var a=JSON.parse(e);console.log(a);var i="<option value='NA'>Select</option>";0!=e.estados&&$.each(a.estados,function(e,a){i+="<option value='"+a.id+"'>"+a.estadonombre+"</option>"}),i+="<option value='ot'>Otro</option>",$(l+" select[name='estado']").html(i)})},l.formval=function(e,a){return input=a+" #"+$(e).attr("id"),""==$(input).val()&&"requerid"==$(input).attr("requerid")?($("#msjerror").iziModal("setSubtitle","El Campo: "+$(input).attr("llc")+", es requerido"),mserror(),!1):"password"==$(input).attr("type")&&$(input).val().length<=5&&"requerid"==$(input).attr("requerid")?($("#msjerror").iziModal("setSubtitle","Las constraseñas deben ser mjrtyayores a 5 digitos"),mserror(),!1):("RFC"!=$(input).attr("llc")||helpvalidar_rfc($(input).val())||"requerid"!=$(input).attr("requerid"))&&("email"!=$(input).attr("type")||helpvailida_correo($(input).val())||"requerid"!=$(input).attr("requerid"))&&("targeta"!=$(input).attr("id")||Conekta.card.validateNumber($(input).val()))&&!("cvv"==$(input).attr("id")&&!Conekta.card.validateCVC($(input).val()))||($("#msjerror").iziModal("setSubtitle","El Campo: "+$(input).attr("llc")+",no es valido"),mserror(),!1)},l.imprime=function(e){$(e).printThis({debug:!1,importCSS:!0,importStyle:!0,printContainer:!0,loadCSS:"/assets/css/bootstrap.css",pageTitle:"",removeInline:!1,printDelay:333,header:null,footer:null,base:!0,formValues:!0,canvas:!0,doctypeString:"...",removeScripts:!1})},l.gentoks=function(a){Conekta.setPublishableKey("key_EDxZCrdzJsGgsEaqzxutE8A");var e={card:{number:a.targeta,name:a.nombre+" "+a.apellidos,exp_year:a.anio,exp_month:a.mes,cvc:a.cvv}};Conekta.token.create(e,function(e){a.token=e.id,a.targeta="",a.cvv="",l.senddata(a,"/home/pagartargeta",function(e){lin=JSON.parse(e),1==lin.pass?(l.removeloc("datospago"),l.removeloc("tipplan"),l.goto("/home/gracias")):($("#msjerror").iziModal("setSubtitle",lin.mensaje),mserror())})},function(e){return $("#preeload").hide(),$("#msjerror").iziModal("setSubtitle",e),mserror(),!1})},l.validajson=function(e){for(key in errors){return-1==e.indexOf(errors[key])}},l.preload=function(e){$("#preeload").fadeOut(1e3)},l.setcookie=function(e,a){$.cookie(e,JSON.stringify(a))},l.getcookie=function(e){return null!=$.cookie(e)&&JSON.parse($.cookie(e))},l.deletecookie=function(e){$.removeCookie(e)},l.setlocal=function(e,a){try{localStorage.setItem(e,JSON.stringify(a))}catch(e){e==QUOTA_EXCEEDED_ERR&&alert("Espacio local lleno.")}},l.removeloc=function(e){localStorage[e]&&localStorage.removeItem(e)},l.getlocal=function(e){return!!localStorage[e]&&JSON.parse(localStorage[e])},l.getparams=function(e){var a=e.split("?")[1],i={};if(a){var l=a.split("&");for(var t in l){var o=l[t].split("=");i[o[0]]=String(o[1])}}return i},l.ejectclick=function(e,a,i){$(e).on(a,c,function(){i()})},l.senddata=function(e,a,i){p1=JSON.stringify(e),$.post(a,{datos:p1},function(e){1==l.validajson(e)&&i(e)})},l.subirimagen=function(e,a,i){$("#preeload").show();var l=$("#"+e)[0].files,t=new FormData;t.append("file",l[0]),$.ajax({url:a,type:"POST",contentType:!1,data:t,processData:!1,cache:!1,beforeSend:function(){},success:function(e){lin=JSON.parse(e),"0"==lin.pass?($("#preeload").hide(),$("#preeload").fadeOut(1e3),$("#msjerror").iziModal("setSubtitle",lin.mensaje),mserror()):i(lin.mensaje)}})},l.previsualizar=function(e,a){if(e.files&&e.files[0])if(2097152<e.files[0].size)$("#msjerror").iziModal("setSubtitle","La imagen no puede sobrepasar los 2Mb"),mserror();else{var i=new FileReader;i.onload=function(e){$("#"+a).attr("src",e.target.result)},i.readAsDataURL(e.files[0])}},l.graficarv2=function(e,a,i,l,t){var o=google.visualization.arrayToDataTable(e);if(console.log(e),"c"===l){var n={title:a,sliceVisibilityThreshold:.1,height:400};new google.visualization.PieChart(document.getElementById(i)).draw(o,n)}if("l"===l){n={title:"",height:500,hAxis:{title:t,titleTextStyle:{color:"#333"}},vAxis:{minValue:0}};new google.visualization.AreaChart(document.getElementById(i)).draw(o,n)}if("b"===l){n={title:a,isStacked:!0,height:200,hAxis:{title:t,titleTextStyle:{color:"#333"}},vAxis:{title:""}};new google.visualization.ColumnChart(document.getElementById(i)).draw(o,n)}if("cu"===l){n={chart:{title:a},hAxis:{title:"",minValue:0},vAxis:{title:""},bars:"horizontal",height:200,colors:["#005d8f","#a5a5a5"],axes:{y:{0:{side:"right"}}}};new google.charts.Bar(document.getElementById(i)).draw(o,google.charts.Bar.convertOptions(n))}},l.graficar=function(e,a,i,l,t){console.log(l),Highcharts.chart(e,{chart:{type:"pie"},title:{text:a},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>",shared:!0},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",stacking:"number"}},series:l})},l.solicitud=function(e){this.senddata(e,"/calificaciones/solicita",function(e){lin=JSON.parse(e),"1"==lin.pass?($("#mod-solicitud").iziModal("close"),$("#msjsucces").iziModal("setSubtitle","Solicitud exitosa, la pagina se actualizara"),mssucces(),setTimeout(function(){location.reload()},5e3)):($("#msjerror").iziModal("setSubtitle",lin.mensaje),mserror())})},l.detallescuestion=function(e){$("#preeload").show(),obj={},obj.num=e,l.senddata(obj,"calificaciones/detallescuestinario",function(e){for(key in lin=JSON.parse(e),dat="",lin)dat+='<div class="col-10"><span class="minitit">'+lin[key].Pregunta+"</span></div>",dat+='<div class="col-2"><span class="minitit">'+lin[key].calificacion+"</span></div>",dat+='<div class="col-12 hr"></div>';$("#mod-detalles .tables").html(dat),$("#mod-detalles").iziModal("open"),$("#preeload").fadeOut(1e3)})},l.modificarcal=function(e){obj={},obj.num=e,l.senddata(obj,"/calificaciones/modificarval",function(e){l.setlocal("cuestion",e)})},l.recalcular=function(){$("#mensaje-confirm").iziModal("close"),$("#preeload").show(),l.senddata(l.getlocal("idvalora"),"/calificar/recalcular",function(e){window.location.href="/perfil",console.log(e)})},l.poncuestionario=function(){lin=JSON.parse(l.getlocal("cuestion")),console.log(lin);var e='<div class=" titulos-blanco  bgazul text-center thead col-12"><h4><strong>Preguntas</strong></h4></div>';for(key in lin)idvalora=lin[key].IDValora,num=lin[key].IDPregunta,respuesta=lin[key].Valoracion,console.log(num),e+='<div class="col-12 col-sm-12 col-xl-12 col-md-12 col-lg-12 tr-table"><div class="row">',e+='<div class="col-12 col-sm-12 col-xl-8 col-md-8 col-lg-8"><span class="preg">¿'+lin[key].Pregunta+"?</span></div>",e+='<div class="col-12 col-sm-12 col-xl-4 col-md-4 col-lg-4"><div class="row">',"Si/No"==$.trim(lin[key].Forma)?e+=sino(respuesta,num):"Si/No/NA"==$.trim(lin[key].Forma)?e+=na(respuesta,num):"'Si/No/NA/NS'"==$.trim(lin[key].Forma)?e+=ns(respuesta,num):"No tiene/NA/NS/Si/No"==$.trim(lin[key].Forma)?e+=not(respuesta,num):e+=numlop(respuesta,num),e+="</div></div>",e+="</div></div>";l.removeloc("idvalora"),l.setlocal("idvalora",idvalora),$(".tables").html(e)},l.msj_enviar=function(){obt=[],dat={},console.log(l.getlocal("idvalora")),l.getlocal("idvalora")?(dat.num=l.getlocal("idvalora"),$("#Preguntas  input").each(function(e){"radio"==$(this).attr("type")&&$(this).is(":checked")?obt.push($(this).attr("llc")+"|"+$(this).val()):"number"==$(this).attr("type")&&obt.push($(this).attr("llc")+"|"+$(this).val())}),dat.repuestas=obt,l.removeloc("idvalora"),l.setlocal("idvalora",dat),$("#mensaje-confirm").iziModal("open")):($("#msjerror").iziModal("setSubtitle","Usted no ha seleccionado alguna empresa para calificar."),mserror())}}function numlop(e,a){var i='<form><div class="row"><div class="col-12">';return i+='<input type="number" value="'+e+'" llc="'+a+'" class="form-control">',i+="</div></div></form>"}function not(e,a){var i='<form><div class="row"><div class="col-12">';return i+="<ul>",i+="<li>",i+="SI"==e?'<input checked type="radio" id="R1si'+a+'" llc="'+a+'" value="SI" name="R">':'<input type="radio" id="R1si'+a+'" llc="'+a+'" value="SI" name="R">',i+='<label for="R1si'+a+'" llc="'+a+'">SI</label>',i+='<div class="check"></div>',i+="</li>",i+="<li>","NO"==e?(i+='<input checked type="radio" id="R1si'+a+'" llc="'+a+'" value="NO" name="R">',i+='<label for="R1si'+a+'" llc="'+a+'">NO</label>'):(i+='<input type="radio" id="R1no'+a+'" llc="'+a+'" value="NO" name="R">',i+='<label for="R1no'+a+'" llc="'+a+'">NO</label>'),i+='<div class="check"></div>',i+="</li>",i+="<li>",i+="NA"==e?'<input checked type="radio" id="R1na'+a+'" llc="'+a+'" value="NA" name="R">':'<input type="radio" id="R1na'+a+'" llc="'+a+'" value="NA" name="R">',i+='<label for="R1na'+a+'" llc="'+a+'">NA</label>',i+='<div class="check"></div>',i+="</li>",i+="<li>",i+="NS"==e?'<input checked  type="radio" id="R1ns'+a+'" llc="'+a+'" value="NS" name="R">':'<input type="radio" id="R1ns'+a+'" llc="'+a+'" value="NS" name="R">',i+='<label for="R1ns'+a+'" llc="'+a+'">NS</label>',i+='<div class="check"></div>',i+="</li>",i+="<li>",i+="NT"==e?'<input checked  type="radio" id="R1nt'+a+'" llc="'+a+'" value="NT" name="R">':'<input type="radio" id="R1nt'+a+'" llc="'+a+'" value="NT" name="R">',i+='<label for="R1nt'+a+'" llc="'+a+'">No Tiene</label>',i+='<div class="check"></div>',i+="</li>",i+="</ul>",i+="</div></div></form>"}function ns(e,a){var i='<form><div class="row"><div class="col-12">';return i+="<ul>",i+="<li>",i+="SI"==e?'<input checked type="radio" id="R1si'+a+'" llc="'+a+'" value="SI" name="R">':'<input type="radio" id="R1si'+a+'" llc="'+a+'" value="SI" name="R">',i+='<label for="R1si'+a+'" llc="'+a+'">SI</label>',i+='<div class="check"></div>',i+="</li>",i+="<li>",i+="NO"==e?'<input checked type="radio" id="R1no'+a+'" llc="'+a+'" value="NO" name="R">':'<input type="radio" id="R1no'+a+'" llc="'+a+'" value="NO" name="R">',i+='<label for="R1no'+a+'" llc="'+a+'">NO</label>',i+='<div class="check"></div>',i+="</li>",i+="<li>",i+="NA"==e?'<input checked type="radio" id="R1na'+a+'" llc="'+a+'" value="NA" name="R">':'<input type="radio" id="R1na'+a+'" llc="'+a+'" value="NA" name="R">',i+='<label for="R1na'+a+'" llc="'+a+'">NA</label>',i+='<div class="check"></div>',i+="</li>",i+="<li>",i+="NS"==e?'<input checked type="radio" id="R1ns'+a+'" llc="'+a+'" value="NS" name="R">':'<input type="radio" id="R1ns'+a+'" llc="'+a+'" value="NS" name="R">',i+='<label for="R1ns'+a+'" llc="'+a+'">NS</label>',i+='<div class="check"></div>',i+="</li>",i+="</ul>",i+="</div></div></form>"}function na(e,a){var i='<form><div class="row"><div class="col-12">';return i+="<ul>",i+="<li>",i+="SI"==e?'<input checked type="radio" id="R1si'+a+'" llc="'+a+'" value="SI" name="R">':'<input type="radio" id="R1si'+a+'" llc="'+a+'" value="SI" name="R">',i+='<label for="R1si'+a+'" llc="'+a+'">SI</label>',i+='<div class="check"></div>',i+="</li>",i+="<li>",i+="NO"==e?'<input checked type="radio" id="R1no'+a+'" llc="'+a+'" value="NO" name="R">':'<input type="radio" id="R1no'+a+'" llc="'+a+'" value="NO" name="R">',i+='<label for="R1no'+a+'" llc="'+a+'">NO</label>',i+='<div class="check"></div>',i+="</li>",i+="<li>",i+="NA"==e?'<input checked type="radio" id="R1na'+a+'" llc="'+a+'" value="NA" name="R">':'<input type="radio" id="R1na'+a+'" llc="'+a+'" value="NA" name="R">',i+='<label for="R1na'+a+'" llc="'+a+'">NA</label>',i+='<div class="check"></div>',i+="</li>",i+="</ul>",i+="</div></div></form>"}function sino(e,a){var i='<form><div class="row"><div class="col-12">';return i+="<ul>",i+="<li>",i+="SI"==e?'<input checked type="radio" id="R1si'+a+'" llc="'+a+'" value="SI" name="R">':'<input type="radio" id="R1si'+a+'" llc="'+a+'" value="SI" name="R">',i+='<label for="R1si'+a+'" llc="'+a+'">SI</label>',i+='<div class="check"></div>',i+="</li>",i+="<li>",i+="NO"==e?'<input checked type="radio" id="R1no'+a+'" llc="'+a+'" value="NO" name="R">':'<input type="radio" id="R1no'+a+'" llc="'+a+'" value="NO" name="R">',i+='<label for="R1no'+a+'" llc="'+a+'">NO</label>',i+='<div class="check"></div>',i+="</li>",i+="</ul>",i+="</div></div></form>"}function helpvailida_correo(e){return emailRegex=/^[-\w.%+]{1,64}@(?:[A-Z0-9-]{1,63}\.){1,125}[A-Z]{2,63}$/i,!!emailRegex.test(e)}function helpvalidar_rfc(e){return!(!e.match(_rfc_pattern_pm)&&!e.match(_rfc_pattern_pf))}function mserror(e){$("#msjerror").iziModal("open",e)}function mssucces(e,a){$("#msjsucces").iziModal("open",e)}function izziFrame(e){$(e).addClass("iziModal").iziModal({title:$(e).attr("title")||$(e).data("title")||"Mensaje de Admyo",headerColor:$(e).data("header-color")||"#005d8f",width:$(e).data("width")||600,fullscreen:$(e).data("fullscreen")||!1,transitionIn:"comingIn",transitionOut:"comingOut",timeout:$(e).data("timeclose")||!1,timeoutProgressbar:$(e).data("bar")||!1,closeOnEscape:$(e).attr("closekey")||$(e).data("closekey")||!0,closeButton:$(e).attr("closebtn")||$(e).data("closebtn")||!0,overlayClose:$(e).attr("over")||$(e).data("over")||!0})}function msplanes(e){$("#planes-mini").iziModal("open",e)}function mscalificacion(e){$("#mensaje-confirm2").iziModal("open",e)}_rfc_pattern_pm="^(([A-ZÑ&]{3})([0-9]{2})([0][13578]|[1][02])(([0][1-9]|[12][\\d])|[3][01])([A-Z0-9]{3}))|(([A-ZÑ&]{3})([0-9]{2})([0][13456789]|[1][012])(([0][1-9]|[12][\\d])|[3][0])([A-Z0-9]{3}))|(([A-ZÑ&]{3})([02468][048]|[13579][26])[0][2]([0][1-9]|[12][\\d])([A-Z0-9]{3}))|(([A-ZÑ&]{3})([0-9]{2})[0][2]([0][1-9]|[1][0-9]|[2][0-8])([A-Z0-9]{3}))$",_rfc_pattern_pf="^(([A-ZÑ&]{4})([0-9]{2})([0][13578]|[1][02])(([0][1-9]|[12][\\d])|[3][01])([A-Z0-9]{3}))|(([A-ZÑ&]{4})([0-9]{2})([0][13456789]|[1][012])(([0][1-9]|[12][\\d])|[3][0])([A-Z0-9]{3}))|(([A-ZÑ&]{4})([02468][048]|[13579][26])[0][2]([0][1-9]|[12][\\d])([A-Z0-9]{3}))|(([A-ZÑ&]{4})([0-9]{2})[0][2]([0][1-9]|[1][0-9]|[2][0-8])([A-Z0-9]{3}))$";var errors=["syntax error","Parse error","Fatal error","Notice","Warning"],help=new helper;$(document).on("click",".btn-princam",function(){var e="#"+$(this).attr("data-pal");$(".palprinc").addClass("d-none"),$(e).removeClass("d-none"),"admyo"===$(this).attr("data-pal")?$("img[data-pal='qval']").attr("src",$(this).attr("data-ruta")+"qval_inactivo.svg"):$("img[data-pal='admyo']").attr("src",$(this).attr("data-ruta")+"admyo_inactivo.svg"),$(this).attr("src",$(this).attr("data-ruta")+$(this).attr("data-pal")+"_activo.svg")}),$(function(){$('[data-toggle="popover"]').popover({trigger:"hover",placement:"auto"})});